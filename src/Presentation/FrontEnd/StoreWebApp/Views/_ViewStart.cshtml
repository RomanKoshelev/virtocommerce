@functions
{
    string GetView()
    {
        string controllerName = HttpContext.Current.Request.RequestContext.RouteData.Values["controller"].ToString();
        string pathToLayout = string.Format("~/Views/{0}/_Layout.cshtml", controllerName);
        return File.Exists(Server.MapPath(pathToLayout)) ? pathToLayout : "~/Views/Shared/_Layout.cshtml";
    }
}

@{
    Layout = Request.IsAjaxRequest() ? null : GetView();
}