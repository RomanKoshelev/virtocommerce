@model PaymentModel

@{
	var paymentMethodTemplate = string.Format("~/Views/Checkout/DisplayTemplates/{0}.cshtml", Model.Name);
	if(!File.Exists(Server.MapPath(paymentMethodTemplate)))
	{
		paymentMethodTemplate = "~/Views/Checkout/DisplayTemplates/Unknown.cshtml";
	}
}

<input type="hidden" name="Payments.Index" value="@ViewBag.index" />
@Html.HiddenFor(m => m.Name)
@Html.HiddenFor(m => m.Id)
@Html.HiddenFor(m => m.DisplayName)
@Html.Partial(paymentMethodTemplate, Model)
